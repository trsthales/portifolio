:root {
    --bg: #0f1724;
    --surface: #0b1220;
    --card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --accent: #4f46e5; /* indigo-600 */
    --accent-2: #06b6d4; /* cyan */
    --muted: #9aa4b2;
    --text: #e6eef8;
    --success: #16a34a;
    --danger: #ef4444;
    --glass-border: rgba(255,255,255,0.04);
    --radius: 14px;

    --select-arrow-color: #E6EEF8; /* cor padr√£o da seta (clara para tema escuro) */
    --modal-tab-bg: rgba(255,255,255,0.02);
    --modal-tab-active-bg: linear-gradient(90deg, var(--accent), var(--accent-2));
    --modal-tab-color: var(--muted);
    --modal-tab-active-color: #ffffff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    font-family: Inter, system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(79,70,229,0.12), transparent 8%),
                radial-gradient(1000px 500px at 90% 90%, rgba(6,182,212,0.06), transparent 10%),
                var(--bg);
    color: var(--text);
    line-height: 1.5;
    padding: 32px 20px;
}

header {
    text-align: center;
    margin-bottom: 20px;
    position: relative;
    padding-bottom: 12px;
}

h1 { margin: 0 0 6px 0; font-size: 1.9rem; letter-spacing: -0.5px; }
h1 + p { margin: 0; color: var(--muted); }

main {
    max-width: 1100px;
    margin: 20px auto 40px auto;
    display: grid;
    grid-template-columns: 1fr 380px;
    gap: 22px;
    align-items: start;
}

/* mobile stack */
@media (max-width: 880px) {
    main { grid-template-columns: 1fr; padding: 0 8px; }
}

.card {
    background: var(--card);
    border: 1px solid var(--glass-border);
    padding: 20px;
    border-radius: var(--radius);
    box-shadow: 0 6px 30px rgba(2,6,23,0.6);
    backdrop-filter: blur(6px) saturate(120%);
}

/* Converter area */
#converter h2 { margin-top: 0; }

label { display: block; margin-top: 12px; color: var(--muted); font-size: 0.95rem; }
input[type="number"], select {
    width: 100%;
    padding: 12px 14px;
    margin-top: 8px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.04);
    background: rgba(255,255,255,0.02);
    color: var(--text);
    font-size: 1rem;
}

/* Melhorias de contraste e acessibilidade para o combo box (select) */
input[type="number"] {
    /* mant√©m apar√™ncia suave para entradas num√©ricas */
    border-color: rgba(255,255,255,0.06);
    box-shadow: inset 0 -1px 0 rgba(0,0,0,0.25);
}

select {
    /* Espa√ßo extra √† direita para a seta personalizada */
    padding-right: 44px;
    border: 1px solid rgba(255,255,255,0.12);
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    -webkit-appearance: none;
    appearance: none;
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    transition: box-shadow 150ms ease, border-color 150ms ease, background 120ms ease;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,0.25);
}

/* Seta SVG embutida (cor em hex para compatibilidade) */
select {
    /* define a cor para a seta via vari√°vel de CSS */
    color: var(--select-arrow-color);
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%23E6EEF8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}

/* Fallback: para navegadores que n√£o suportam a t√©cnica acima, oferecemos duas variantes prontas */
.select-arrow-light {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%230B1220' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}
.select-arrow-dark {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%23E6EEF8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}

/* Se o body tiver a classe de alto contraste global, aplica buraco visual no select */
body.select-high-contrast select, select.select-high-contrast {
    background: #071024 !important;
    border-color: #e6eef8 !important;
    color: #e6eef8 !important;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%23E6EEF8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>") !important;
}

/* Estado de foco acess√≠vel (an√©l de destaque com boa visibilidade) */
select:focus, input[type="number"]:focus {
    outline: none;
    border-color: var(--accent-2);
    box-shadow: 0 0 0 4px rgba(6,182,212,0.12), inset 0 -1px 0 rgba(0,0,0,0.25);
}

/* foco vis√≠vel apenas para navegadores que suportam :focus-visible */
select:focus-visible, input[type="number"]:focus-visible {
    box-shadow: 0 0 0 4px rgba(6,182,212,0.18), inset 0 -1px 0 rgba(0,0,0,0.25);
}

/* Quando o usu√°rio passa o mouse, leve aumento de contraste */
select:hover {
    border-color: rgba(255,255,255,0.18);
}

/* Tenta melhorar a legibilidade das op√ß√µes quando o dropdown abre (nem todos os browsers aplicam) */
select option {
    color: #0b1220; /* texto escuro para muito contraste */
    background: #ffffff; /* fundo claro nas op√ß√µes para leitura */
}

/* Fornece uma alternativa vis√≠vel de alto contraste, aplic√°vel via JS/HTML se necess√°rio */
.select-high-contrast {
    background: #071024 !important;
    border-color: #e6eef8 !important;
    color: #e6eef8 !important;
    box-shadow: 0 0 0 3px rgba(230,238,248,0.06) !important;
}

button {
    margin-top: 14px;
    padding: 10px 14px;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 700;
    letter-spacing: 0.2px;
    transition: transform 160ms ease, box-shadow 160ms ease, opacity 140ms ease;
}
button:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(79,70,229,0.18); }
button:active { transform: translateY(0); }

button[hidden] { display: none; }

.result {
    margin-top: 14px;
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--text);
    padding: 10px 12px;
    border-radius: 8px;
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.02);
}

.explain summary {
    cursor: pointer;
    margin-top: 12px;
    font-weight: 700;
    color: var(--muted);
}

.explain div { padding-top: 10px; color: var(--muted); font-size: 0.95rem; }

/* Quiz */
#exercicios h2 { margin-top: 0; }

#quiz .option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.03);
    cursor: pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    transition: background 140ms ease, transform 120ms ease;
}
#quiz .option:hover { background: rgba(255,255,255,0.02); transform: translateY(-3px); }

/* estilo do radio usando accent-color para navegadores modernos */
#quiz input[type="radio"] { accent-color: var(--accent-2); width: 18px; height: 18px; }
#quiz form { margin-top: 12px; }

.feedback { margin-top: 14px; padding: 14px; border-radius: 12px; font-size: 0.98rem; display: flex; gap: 12px; align-items: flex-start; }
.feedback .icon { width: 36px; height: 36px; border-radius: 8px; display:flex; align-items:center; justify-content:center; font-weight:700; }
.feedback.correct { background: linear-gradient(180deg, rgba(22,163,74,0.06), rgba(22,163,74,0.02)); color: var(--success); border: 1px solid rgba(22,163,74,0.12); }
.feedback.correct .icon { background: rgba(22,163,74,0.12); color: var(--success); }
.feedback.wrong { background: linear-gradient(180deg, rgba(239,68,68,0.06), rgba(239,68,68,0.02)); color: var(--danger); border: 1px solid rgba(239,68,68,0.12); }
.feedback.wrong .icon { background: rgba(239,68,68,0.12); color: var(--danger); }
.feedback .content { flex: 1; }

/* Destaques dentro do feedback */
.feedback .highlight { font-weight: 700; color: var(--text); display:inline-block; margin-bottom:6px; }
.feedback .diagnostics { margin-top:8px; color: var(--muted); font-size:0.95rem; }
.feedback .checklist { margin-top:8px; color: var(--muted); font-size:0.95rem; }

/* bot√µes extras na √°rea do quiz */
.quiz-extra-actions { margin-top: 10px; display:flex; gap:8px; }
.quiz-extra-actions button { background: rgba(255,255,255,0.02); color: var(--muted); border: 1px solid rgba(255,255,255,0.03); padding:8px 10px; border-radius:8px; font-weight:600; }
.quiz-extra-actions button:hover { transform: translateY(-2px); }

/* Modal */
.modal.hidden { display: none; }
.modal { position: fixed; inset: 0; z-index: 80; display:flex; align-items:center; justify-content:center; }
.modal-backdrop { position:absolute; inset:0; background: rgba(2,6,23,0.6); backdrop-filter: blur(3px); }
.modal-content { position: relative; max-width: 820px; width: 94%; max-height: 86vh; overflow:auto; padding: 18px; border-radius: 12px; }
.modal-close { position:absolute; top:10px; right:10px; background:transparent; border:none; font-size:22px; color:var(--muted); cursor:pointer; }
.modal-body h3 { margin-top:0; }

/* Modal tabs est√©ticas */
.modal-tabs{ display:flex; gap:8px; margin-bottom:12px; }
.modal-tabs .tab-btn{ background: var(--modal-tab-bg); border:1px solid rgba(255,255,255,0.04); padding:8px 12px; border-radius:8px; cursor:pointer; color:var(--modal-tab-color); font-weight:700; }
.modal-tabs .tab-btn.active{ background: var(--modal-tab-active-bg); color: var(--modal-tab-active-color); box-shadow: 0 6px 20px rgba(11,29,80,0.18); }
.modal-content-wrapper{ padding:8px 0; }
.tab-pane{ padding:8px 4px; }
.tab-pane.hidden{ display:none; }

/* Garantir contraste suficiente no modal para tema claro/escaro */
.modal-content.card{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid var(--glass-border); }

/* Pequenos ajustes para harmonizar o visual com o select */
.modal-body h3{ color: var(--text); }
.modal-body .diagnostics, .modal-body .checklist{ color: var(--muted); }

/* Ajusta a imagem SVG do select para temas (fallbacks definidos por media query) */
select {
    /* texto e apar√™ncia permanecem os mesmos */
    color: var(--text);
    /* por padr√£o (tema escuro) usamos seta clara */
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%23E6EEF8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}

@media (prefers-color-scheme: light){
    /* Em tema claro, a seta fica escura */
    select {
        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%230B1220' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
    }
}

/* Tema claro quando a classe body.theme-light estiver ativa */
body.theme-light {
    --bg: #f5f7fa;
    --surface: #ffffff;
    --card: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));
    --accent: #4f46e5; /* pode manter */
    --accent-2: #06b6d4;
    --muted: #475569;
    --text: #0b1220;
    --glass-border: rgba(11,18,32,0.04);
    --modal-tab-bg: rgba(11,18,32,0.04);
    --modal-tab-color: #475569;
}

/* Tema escuro expl√≠cito (opcional) */
body.theme-dark {
    --bg: #0f1724;
    --surface: #0b1220;
    --card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --accent: #4f46e5;
    --accent-2: #06b6d4;
    --muted: #9aa4b2;
    --text: #e6eef8;
    --glass-border: rgba(255,255,255,0.04);
    --modal-tab-bg: rgba(255,255,255,0.02);
    --modal-tab-color: var(--muted);
}

/* For√ßar a seta do select conforme a classe de tema aplicada */
body.theme-light select, select.select-arrow-light {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%230B1220' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}
body.theme-dark select, select.select-arrow-dark {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24'><path stroke='%23E6EEF8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/></svg>");
}

/* Pequeno ajuste de contraste para o resultado em tema claro */
body.theme-light .result { background: rgba(11,18,32,0.04); color: var(--text); border-color: rgba(11,18,32,0.04); }

/* Garantir que quando o modo alto contraste √© aplicado ele sobressaia sobre os temas */
body.select-high-contrast, body.theme-light.select-high-contrast, body.theme-dark.select-high-contrast {
    /* preferimos o alto contraste definido previamente */
}

/* Global controls (header) */
.global-controls { display:flex; gap:16px; align-items:center; justify-content:flex-end; margin-top:12px; }
.global-controls .control { display:flex; flex-direction:column; align-items:flex-end; }

/* Em telas pequenas, empilha os controles sob o t√≠tulo */
@media (max-width: 560px) {
    .global-controls { justify-content:flex-start; gap:10px; margin-top:10px; flex-wrap:wrap; }
    .global-controls .control { align-items:flex-start; }
}

/* Destaque para o bot√£o 'Ver passo a passo completo' */
#viewFullSteps {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color: #fff;
    border: none;
    padding: 10px 14px;
    border-radius: 10px;
    font-weight: 800;
    letter-spacing: 0.2px;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 10px 30px rgba(79,70,229,0.18);
    cursor: pointer;
    transition: transform 160ms ease, box-shadow 160ms ease, opacity 140ms ease;
}
#viewFullSteps::before { content: "üìù"; display:inline-block; }
#viewFullSteps:hover { transform: translateY(-3px); box-shadow: 0 16px 40px rgba(79,70,229,0.22); }
#viewFullSteps:active { transform: translateY(0); }
#viewFullSteps:focus { outline: none; box-shadow: 0 0 0 4px rgba(79,70,229,0.12), 0 10px 30px rgba(79,70,229,0.18); }

/* Ajustes para manter contraste no modo de alto contraste */
body.select-high-contrast #viewFullSteps {
    background: linear-gradient(90deg, rgba(22,163,74,0.18), rgba(22,163,74,0.12));
    color: var(--text);
    box-shadow: 0 8px 24px rgba(22,163,74,0.12);
    border: 1px solid rgba(22,163,74,0.18);
}

/* Quick links navigation */
.quick-links { margin: 8px auto 0; max-width: 1100px; padding: 0 20px; }
.quick-links .card.small { display:flex; gap:12px; align-items:center; padding:10px 12px; border-radius:10px; }
.quick-links a { color: var(--accent-2); font-weight:700; text-decoration:none; }
.quick-links a:hover { text-decoration:underline; }

/* Smooth scroll behavior for in-page anchors */
html { scroll-behavior: smooth; }

/* Highlight / tip boxes inside explanatory content */
.card article h3 { margin-top: 0.6rem; }
.card article .tip, .card article .warning { display:block; padding:12px 14px; border-radius:10px; margin:10px 0; }
.card article .tip { background: linear-gradient(90deg, rgba(79,70,229,0.06), rgba(6,182,212,0.04)); border:1px solid rgba(79,70,229,0.06); color: var(--text); }
.card article .warning { background: linear-gradient(180deg, rgba(239,68,68,0.06), rgba(239,68,68,0.03)); border:1px solid rgba(239,68,68,0.08); color: var(--danger); }

/* Box de dica com um √≠cone */
.highlight-box { display:flex; gap:12px; align-items:flex-start; padding:12px; border-radius:10px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.03); }
.highlight-box .icon { width:36px; height:36px; border-radius:8px; background: linear-gradient(90deg,var(--accent),var(--accent-2)); display:flex; align-items:center; justify-content:center; font-weight:800; }
.highlight-box p { margin:0; color: var(--muted); }

/* Make the materia section stand out a bit */
#materia .card { border-left: 4px solid var(--accent-2); padding-left: 18px; }

/* Responsive: compact quick-links on small screens */
@media (max-width: 600px) {
    .quick-links .card.small { flex-direction: column; align-items:flex-start; gap:6px; }
}

/* Navbar specific tweaks */
.navbar { display:flex; justify-content:center; }
.navbar .card.small { width:100%; max-width:1100px; display:flex; justify-content:flex-start; gap:14px; align-items:center; }
.navbar .card.small strong { margin-right:6px; }

/* Layout para linha de imagens dentro da se√ß√£o explicativa */
.image-row { display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }
.image-row .highlight-box { flex: 1 1 320px; align-items:flex-start; }
.image-row img { width:100%; height:auto; display:block; border-radius:8px; }

@media (max-width: 720px) {
    .image-row { flex-direction:column; }
}

/* Grid for exercises list */
.ex-list-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.ex-list-grid h4 { margin-top: 0; }
.ex-list-grid ul { margin: 8px 0 0 0; padding-left: 18px; color: var(--muted); }

@media (max-width: 880px) {
    .ex-list-grid { grid-template-columns: 1fr; }
}

/* Estilo para item de exerc√≠cio selecionado na lista */
.ex-list-grid li.selected {
    background: linear-gradient(90deg, rgba(79,70,229,0.08), rgba(6,182,212,0.04));
    border: 1px solid rgba(79,70,229,0.14);
    color: var(--text);
    padding: 8px 10px;
    border-radius: 8px;
    box-shadow: 0 6px 18px rgba(11,29,80,0.12);
}

/* foco acess√≠vel ao selecionar via teclado */
.ex-list-grid li:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(6,182,212,0.12);
}

/* melhora o cursor e hover para indicar clicabilidade */
.ex-list-grid li { transition: transform 120ms ease, background 120ms ease; }
.ex-list-grid li:hover { transform: translateY(-2px); background: rgba(255,255,255,0.01); }
